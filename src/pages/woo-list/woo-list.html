<ion-header>

  <ion-navbar>
    <ion-buttons start>
      <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>{{ title }}</ion-title>
  

    <ion-buttons end>
      <button ion-button class="search-button-header" (click)="toggleSearchBar()">
        <ion-icon name="search"></ion-icon>
      </button>

      <button ion-button (click)="showCart()">
      	<ion-icon name="cart"></ion-icon>
        <ion-badge color="dark" item-end>{{cart_count}}</ion-badge>
      </button>
    </ion-buttons>

	</ion-navbar>

  <ion-toolbar *ngIf="showSearch">
    <ion-searchbar placeholder="{{'Search' | translate }}" debounce="1000" (ionInput)="search($event)" (ionClear)="clearSearch()"></ion-searchbar>
  </ion-toolbar>

  <ion-item *ngIf="categories && !showSearch" id="favorites-toolbar" color="light">

    <ion-select [(ngModel)]="category" (ionChange)="categoryChanged()" placeholder="{{ 'Category' | translate }}">

      <ion-option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name | translate }}</ion-option>

    </ion-select>

  </ion-item>


</ion-header>


<ion-content [ngClass]="customClasses">
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  
  <ion-list class="woocommerce-list">

    <ion-card *ngFor="let item of items" (tap)="itemTapped($event, item)">

      <div class="card-featured-wrap" *ngIf="item.images || item.image">
        <div *ngIf="item.images && item.images[0].src" class="card-featured-image" [ngStyle]="{'background-image': 'url('+ item.images[0].src +')'}"></div>
        <div *ngIf="item.image && item.image.src" class="card-featured-image" [ngStyle]="{'background-image': 'url('+ item.image.src +')'}"></div>
      </div>

      <div *ngIf="item.appp && item.appp.woo_list && item.appp.woo_list.above_title" [innerHTML]="item.appp.woo_list.above_title"></div>

      <ion-card-content>

        <ion-card-title *ngIf="item.name">
          <h2 [innerHTML]="item.name"></h2>
        </ion-card-title>

        <div *ngIf="item.appp && item.appp.woo_list && item.appp.woo_list.below_title" [innerHTML]="item.appp.woo_list.below_title"></div>

        <p *ngIf="item.price && !item.sale_price" class="product-price">${{item.price}}</p>

        <p *ngIf="item.sale_price" class="product-price">Sale! ${{item.sale_price}}</p>

        <p *ngIf="item.description" [innerHTML]="item.description" class="product-description"></p>

        <p *ngIf="item.average_rating && item.average_rating != '0.00'" class="product-rating"><em>Rating: {{item.average_rating}} stars</em></p>

      </ion-card-content>

      <div *ngIf="item.appp && item.appp.woo_list && item.appp.woo_list.below_content" [innerHTML]="item.appp.woo_list.below_content"></div>

    </ion-card>

  </ion-list>

  <ion-infinite-scroll (ionInfinite)="loadMore($event)">
   <ion-infinite-scroll-content></ion-infinite-scroll-content>
 </ion-infinite-scroll>

</ion-content>